#include "../inc/mega.h"

/*
---------------------------------------------------------------------------------------------------------
|                           < Module  Definition >                                                      | 
---------------------------------------------------------------------------------------------------------
| < FILE                     : mega.c                                                                   |                                  
| < Author                   : Hassan Elsaied                                                           |
| < Version                  : Mega2v241022                                                             |
| < Refences                 : no- ref                                                                  |  
| < SRAM USAGE               : no byte used                                                             |
| < PROGRAM USAGE            : at total driver on ( ) Byte                                              |                                    
| < Hardware Usage           : timer                                                                    |
| < File Created             : 24-10-2022                                                               |
---------------------------------------------------------------------------------------------------------
 */


int main(void) {

    /*app section*/

    /*
    ---------------------------------------------------------------------------------------------------------
    |                       < Hardware Initialization in app >                                                        |
    ---------------------------------------------------------------------------------------------------------
     */

    appBoot();
    /*
  ---------------------------------------------------------------------------------------------------------
  |                       < system Initialization in app >                                                |
  ---------------------------------------------------------------------------------------------------------
     */
    setupHwTimer0();
    systemInit();
    /*
     ---------------------------------------------------------------------------------------------------------
     |                   < UARTS interface Initialization >                                                  |
     ---------------------------------------------------------------------------------------------------------
     */
#if defined USART_MODULE
#if USART_MODULE
    usartInit();
#endif 
#endif

    /*
     ---------------------------------------------------------------------------------------------------------
     |                   < TWI interface Initialization >                                                    |
     ---------------------------------------------------------------------------------------------------------
     */
#if defined TWI_MODULE
#if (TWI_MODULE) 
#if (TWI_TYPE == TWI_MASTER_SLAVE) || (TWI_TYPE == TWI_MASTER)
    twi_master_init();
#endif
#endif
#endif
    /*
  ---------------------------------------------------------------------------------------------------------
  |                       < Internal EEPROM Initialization  >                                             |
  ---------------------------------------------------------------------------------------------------------
     */
#if defined EEPROM_MODULE
#if EEPROM_MODULE
    eepromInit();
#endif
#endif
    /*
   ---------------------------------------------------------------------------------------------------------
   |                   < External EEPROm interface Initialization >                                        |
   ---------------------------------------------------------------------------------------------------------
     */
#if (defined EX_EEPROM_MODULE )
#if EX_EEPROM_MODULE 
    exEepromInit();
#endif
#endif
    /*
   ---------------------------------------------------------------------------------------------------------
   |                   < DS1307 interface Initialization >                                                 |
   ---------------------------------------------------------------------------------------------------------
     */
#if (defined DS1307_MODULE)
#if DS1307_MODULE 
    ds1307Init();
#endif
#endif

    /*
   ---------------------------------------------------------------------------------------------------------
   |                   < KeyPad interface Initialization >                                                 |
   ---------------------------------------------------------------------------------------------------------
     */
#if defined (KEYPAD_MODULE)
#if KEYPAD_MODULE 
    keyInit();
#endif    
#endif
    /*
    ---------------------------------------------------------------------------------------------------------
    |                       < Button Interface  Initialization  >                                             |
    ---------------------------------------------------------------------------------------------------------
     */
#if defined (BUTTON_MODULE)
#if BUTTON_MODULE
    buttonInit();
#endif
#endif

    /*
   ---------------------------------------------------------------------------------------------------------
   |                       < signals Interface  Initialization  >                                             |
   ---------------------------------------------------------------------------------------------------------
     */
#if defined (SIGNALGENERATED_MODULE)
#if SIGNALGENERATED_MODULE
    SignalsInit();
#endif
#endif
    /*
   ---------------------------------------------------------------------------------------------------------
   |                   < LCD interface Initialization >                                                    |
   ---------------------------------------------------------------------------------------------------------
     */
#if defined(LCD_MODULE)
#if LCD_MODULE 
    lcdHwInit();
#endif
#endif
    /*
     ---------------------------------------------------------------------------------------------------------
     |                   < LCD Menu interface Initialization >                                               |
     ---------------------------------------------------------------------------------------------------------
     */
#if defined LCDMNUE_MODULE
#if LCDMNUE_MODULE
    MenuInit();
#endif
#endif

    /*
   ---------------------------------------------------------------------------------------------------------
   |                   <CSMA Interface Initialization >                                                             |
   ---------------------------------------------------------------------------------------------------------
     */
#if defined CSMA_MODULE
#if CSMA_MODULE 
    csmaInit();
#endif       
#endif
    /*
    ---------------------------------------------------------------------------------------------------------
    |                   <Application interface Initialization >                                             |
    ---------------------------------------------------------------------------------------------------------
     */
    appInit();
    /*
       ---------------------------------------------------------------------------------------------------------
       |                   < Hardware Timer  Start Count >                                                     |
       ---------------------------------------------------------------------------------------------------------
     */
    startHwTimer0();

    while (1) {
        /*
        ---------------------------------------------------------------------------------------------------------
        |                       < Internal EEPROM Driver  >                                                     |
        ---------------------------------------------------------------------------------------------------------
         */
#if defined EEPROM_MODULE
#if EEPROM_MODULE
        eepromDriver();
#endif
#endif

        /*
          ---------------------------------------------------------------------------------------------------------
          |                   <External EEPROM Driver >                                                           |
          ---------------------------------------------------------------------------------------------------------
         */
#if defined EX_EEPROM_MODULE
#if EX_EEPROM_MODULE
        exeepromDriver();
#endif
#endif
        /*
          ---------------------------------------------------------------------------------------------------------
          |                   <DS1307 EEPROM Driver >                                                             |
          ---------------------------------------------------------------------------------------------------------
         */

#if defined DS1307_MODULE
#if DS1307_MODULE
        ds1307Driver();
#endif
#endif

        /*
        ---------------------------------------------------------------------------------------------------------
        |                   <LCD Menu  Driver >                                                                 |
        ---------------------------------------------------------------------------------------------------------
         */
#if defined LCDMNUE_MODULE
#if LCDMNUE_MODULE
        menueDriver();
#endif
#endif
        /*
        ---------------------------------------------------------------------------------------------------------
        |                   <LCD  Driver >                                                                      |
        ---------------------------------------------------------------------------------------------------------
         */
#if defined (LCD_MODULE)
#if LCD_MODULE
        lcdDriver();
#endif
#endif
        /*
        ---------------------------------------------------------------------------------------------------------
        |                   <CSMA  Driver >                                                                 |
        ---------------------------------------------------------------------------------------------------------
         */
#if defined (CSMA_MODULE)
#if CSMA_MODULE
        csmaDriver();
#endif
#endif
        /*
           ---------------------------------------------------------------------------------------------------------
           |                   <Application   Driver >                                                             |
           ---------------------------------------------------------------------------------------------------------
         */
        appMain();
    }

}
